syntax = "proto3";

package com.fanaujie.ripple.protobuf;

option java_multiple_files = true;
option java_package = "com.fanaujie.ripple.protobuf.msggateway";

import "MessageAPI.proto";

enum PushMessageType {
  PUSH_MESSAGE_TYPE_UNSPECIFIED = 0;
  PUSH_MESSAGE_TYPE_SELF_INFO_UPDATE = 1;
  PUSH_MESSAGE_TYPE_RELATION_INFO_UPDATE = 2;
  PUSH_MESSAGE_TYPE_CONVERSATION_INFO_UPDATE = 3;
  PUSH_MESSAGE_TYPE_SINGLE_MESSAGE = 4;
}

message PushMessageRequest {
  repeated PushMessageType push_message_type = 1;
  string send_user_id = 2;
  string receive_user_id = 3;
  string receive_device_id = 4;
  oneof payload {
    SendMessageReq message_data = 6;
  }
}

message PushMessageResponse {
  string send_user_id = 1;
  string receive_user_id = 2 ;
  bool  is_success = 3;
}

message BatchPushMessageRequest {
  repeated PushMessageRequest requests = 1;
}

message BatchPushMessageResponse {
  repeated PushMessageResponse responses = 1;
}

service MessageGateway {
  rpc PushMessageToUser(BatchPushMessageRequest) returns (BatchPushMessageResponse);
}